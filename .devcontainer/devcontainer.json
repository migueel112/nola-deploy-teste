{
    "name": "Python 3",
    "image": "mcr.microsoft.com/devcontainers/python:1-3.11-bookworm",
    "remoteUser": "root",

    // Encaminha a porta do Streamlit para que você possa acessá-lo no navegador
    "forwardPorts": [8501],

    // Comandos para configurar o ambiente
    "updateContentCommand": "[ -f packages.txt ] && sudo apt update && sudo apt upgrade -y && sudo xargs apt install -y <packages.txt; [ -f requirements.txt ] && pip3 install --user -r requirements.txt; pip3 install --user streamlit; echo '✅ Packages installed and Requirements met'",
    
    // Instala o PostgreSQL após a criação do container
    "postCreateCommand": "sudo apt-get update && sudo apt-get install -y postgresql postgresql-client",

    // Inicia o serviço do PostgreSQL sempre que o container iniciar
    "postStartCommand": "sudo service postgresql start",

    // Inicia o Streamlit automaticamente após o container iniciar
    "postAttachCommand": "streamlit run /workspaces/nola-god-level/nola-god-level/frontend/app.py --server.port 8501 --server.address 0.0.0.0"
}